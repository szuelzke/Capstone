{% extends 'dashboard.html' %}

{% block title %}Transactions{% endblock %}

{% block inner_content %}
<div class="row row-v">
    <div class='card'>
        <h2>All Transactions</h2>

        <table id="transactions-tbl">
            <thead>
                <tr>
                    <th class='tooltip'><i class="fa-regular fa-calendar"></i><span class='tooltiptext'>Date</span></th>
                    <th class='tooltip'><i class="fa-solid fa-building-columns"></i>
                        <span class='tooltiptext'>Description</span>
                    </th>

                    <th class='tooltip'><i class="fa-solid fa-money-bill"></i><span class='tooltiptext'>Amount</span>
                    </th>
                    <th>Balance</th>
                    <th class='tooltip'><i class="fa-solid fa-tags"></i><span class='tooltiptext'>Category</span></th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
                <tr>
                    <td colspan="6"><button onclick="toggleAdd()"><i class='fa-solid fa-plus pd-5'></i>Add Transaction</button></td>
                </tr>
                {% for transaction in transactions%}
                <tr>
                    <td>{{transaction.date}}</td>
                    <td>{{transaction.title}}</td>
                    <td>{{transaction.amount}}</td>
                    <td>{{transaction.amount_remaining}}</td>
                    <td>{{transaction.category_id}}</td>
                    <td class="sharespend-button">
                        <a href=""><i class="fa-solid fa-pen-to-square"></i>Edit</a>
                        <button><i class="fa-solid fa-trash"></i> Delete</button>
                        <a href=""><i class="fa-solid fa-share"></i> Share</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>

        </table>
    </div>
</div>

<!-- add transaction popup -->
<div id="add-transaction" class='dimmer' style='display:none;'>
    <h2>Add Transaction</h2>
    <div class='row card'>
        <a class='card-x-button fa-solid fa-x' href="{{ url_for('transactions', account_id=account.account_id)}}"></a>
        <form action="{{ url_for('addtransaction', account_id=account.account_id)}}" class='form-deco'>
            <input
                type='date'
                placeholder='Date'
                required />
            <input
                type='text'
                placeholder='Title'
                required />
            <input
                type='number'
                min='0'
                placeholder='Amount'
                required />
            <select>
                <option name='category'>Category</option>
                <option name='category'>Category</option>
                <option name='category'>Category</option>
                <option name='category'>Category</option>
            </select>
            <input type='submit' />
        </form>
    </div>
</div>

<script>
    /* toggles add transactions popup */
    function toggleAdd() {
        let add = document.getElementById('add-transaction');
        if (add.style.display === 'none') {
            add.style.display = 'block';
        } else {
            add.style.display = 'none';
        }
    }
</script>

{% endblock %}